C51 COMPILER V9.52.0.0   MAIN                                                              04/08/2024 22:54:22 PAGE 1   


C51 COMPILER V9.52.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: F:\all_for_51\keil\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          #include "reg52.h"
   2          #include "motor.h"
   3          #include "delay.h"
   4          #include "uart.h"
   5          #include "time.h"
   6          #include "stdio.h"
   7          #include "oled.h"
   8          #include "ESP8266.h"
   9          
  10          
  11          sbit speedIO =P3^2; //å¤–éƒ¨ä¸­æ–­0
  12          unsigned int speedCnt=0;
  13          extern unsigned int speed;
  14          extern char signal;
  15          char speedMes[30];
  16          //å‘é€æ•°æ®
  17          char FSSJ[]="AT+CIPSEND=0,5\r\n";
  18          
  19          void EX0Init()
  20          {
  21   1      EX0=1; //å…è®¸ä¸­æ–­
  22   1      //EA=1; //åˆå§‹åŒ–ä¸²å£çš„æ—¶å€™å·²ç»æ‰“å¼€
  23   1      IT0=1; //é…ç½®ä¸ºä¸‹é™æ²¿è§¦å‘
  24   1      
  25   1      
  26   1      
  27   1      }
  28          
  29          void main()
  30          {
  31   1      
  32   1        Time0Init();//å®šæ—¶å™¨0çš„åˆå§‹åŒ– -- å…ˆå†™ -- ä»–çš„TMOD æ˜¯ç›´æ¥å¤åˆ¶çš„ï¼Œä¸ºäº†ä¸å½±å“åé¢çš
             -„æ“ä½œ
  33   1        UartInit();//åˆå§‹åŒ– ä¸²å£
  34   1        Delay1000ms(); // ç»™wifiæ¨¡å—ä¸Šç”µæ—¶é—´
  35   1        initWifI_AP(); // wifiåˆå§‹åŒ–, å·¥ä½œåœ¨å·¥ä½œæ¨¡å¼
  36   1        waitConnect();
  37   1        
  38   1        EX0Init(); //å¤–éƒ¨ä¸­æ–­åˆå§‹åŒ–
  39   1        Oled_Init();
  40   1        Oled_Clear();
  41   1        while(1){
  42   2        if(signal){ //1så‘é€ä¸€æ¬¡ï¼Œå‘å®Œè®°å¾—å¤ä½
  43   3          sendString(FSSJ);
  44   3          Delay1000ms();
  45   3          sprintf(speedMes,"speed: %d cm/s ",speed);//ç»„ä»¶å­—ç¬¦ä¸²
  46   3          sendString(speedMes);
  47   3          signal=0;
  48   3          }
  49   2          
  50   2          Oled_Show_Str(2,2,speedMes);
  51   2        }
  52   1      
  53   1      } 
  54          // ä»¥ä¸‹çš„å¤–éƒ¨ä¸­æ–­æˆ‘ä»¬è®¾ç½®ä¸ºä¸‹é™æ²¿è§¦å‘
C51 COMPILER V9.52.0.0   MAIN                                                              04/08/2024 22:54:22 PAGE 2   

  55          void speedHandler() interrupt 0 
  56          {
  57   1       speedCnt++;
  58   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    109    ----
   CONSTANT SIZE    =     16    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     49    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
